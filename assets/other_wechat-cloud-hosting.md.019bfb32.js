import{_ as e,o as a,c as p,Q as t}from"./chunks/framework.12b7deed.js";const c=JSON.parse('{"title":"微信云托管，一篇文章搞定本地调试流程","description":"","frontmatter":{"title":"微信云托管，一篇文章搞定本地调试流程","head":[["meta",{"name":"og:title","content":"微信云托管，一篇文章搞定本地调试流程 | VitePress"}]]},"headers":[],"relativePath":"other/wechat-cloud-hosting.md","filePath":"other/wechat-cloud-hosting.md","lastUpdated":1698918793000}'),i={name:"other/wechat-cloud-hosting.md"},r=t('<h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p>今天就来白嫖一下微信的云托管的功能，主要是因为写了微信小程序的云开发，然后像自己写个后台管理系统，发现云开发抛出去的接口回出现跨域的情况，但是配置proxy代理的话，只能在开发的时候生效，要是打包之后呢，岂不是还是会跨域。就想起了跨域的原因，只有浏览器才会有同源策略的问题，那我用一个node写一个服务端岂不是就不会有这个问题，于是就动手起来了，但是有发现一个问题，node服务端，只能本地访问，线上咋整，于是就搞起了微信的云托管。</p><p>根据微信官网的步骤一步一个脚印：<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloudrun/src/guide/debug/" target="_blank" rel="noreferrer">本地调试</a></p><h2 id="下载-docker" tabindex="-1">下载 Docker <a class="header-anchor" href="#下载-docker" aria-label="Permalink to &quot;下载 Docker&quot;">​</a></h2><p>这个Docker的使用前提条件是：首先打开电脑的任务管理器-性能 -要有虚拟化开启。如果是禁用状态的，可以根据个人的电脑的不同去搜索如何开启。如下图：</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a01e32cd4cef4679aa47a86e504822dd~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>下载完后，立即重新启动电脑。随后电脑后自动打开Docker，会弹出这样的提示</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9eef62c6df442f0b9fd3472f0ec5450~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>解决报错：<br> 更加报错提示，需要我们自己手动更新一下，我们根据提示去微软官网下载最新版的wsl2安装后即可正常打开。<br><a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" target="_blank" rel="noreferrer">更新包下载链接</a></p><p>安装完之后，重新启动Docker就可以了</p><h2 id="创建项目" tabindex="-1">创建项目 <a class="header-anchor" href="#创建项目" aria-label="Permalink to &quot;创建项目&quot;">​</a></h2><p>在微信云托管的控制台中创建服务，自由选择自己所需要的官方模板，也可以自己定义，这里我选择的就是Koa</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2ad9ef3b6084fc2bad588487bfa6025~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>看到这样就说明创建项目成功了</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ad9dd61f6a84155813983ea44f7c496~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>滚动到下面，点击给予模板开发。</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bfa5777c12845269e690366d1220a3f~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>选择自己的仓库</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8821faf54fe4a0085b44bcd2e3efd4b~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 id="拉取项目到本地" tabindex="-1">拉取项目到本地 <a class="header-anchor" href="#拉取项目到本地" aria-label="Permalink to &quot;拉取项目到本地&quot;">​</a></h2><p>使用刚刚创建好的给仓库地址克隆下来</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fddde29f14a495c8918e38d820628f2~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 id="添加配置项" tabindex="-1">添加配置项 <a class="header-anchor" href="#添加配置项" aria-label="Permalink to &quot;添加配置项&quot;">​</a></h2><p><code>container.config.json</code>要添加这个配置项，然后如果存在<code>.cloudbase</code>文件夹则删除，然后重启项目，即可 <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58f1269046e3406f94dfd2349728395a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 id="安装插件" tabindex="-1">安装插件 <a class="header-anchor" href="#安装插件" aria-label="Permalink to &quot;安装插件&quot;">​</a></h2><p>在vscode中西下载插件<code>weixin-cloudbase</code></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b563f5bb75524d3994abab42758538b5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>还需要下载Docker的插件</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa35268c9096449e8d58103e88bb7711~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>最后显示这样就说明成功</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fd91755afa84b0aab5a0645db265f28~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 id="配置weixin-cloudbase信息" tabindex="-1">配置weixin-cloudbase信息 <a class="header-anchor" href="#配置weixin-cloudbase信息" aria-label="Permalink to &quot;配置weixin-cloudbase信息&quot;">​</a></h2><p>可以在插件上直接设置</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/611e85f4b33e4c2491832760a7aca49d~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>配置以下信息</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61e3e6a832834da7813c92e15fe4dcd2~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>或者是通过Docker上的也可以</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ffb347e02fa4f89b587f2523ee024a5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>配置好后，就开始启动项目了</p><h2 id="启动项目" tabindex="-1">启动项目 <a class="header-anchor" href="#启动项目" aria-label="Permalink to &quot;启动项目&quot;">​</a></h2><p>要先启动mySql的连接，然后再去启动服务的，不然服务会启动不成功<br> 最后显示这样就说明成功</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/197b1c5d29d74f209a99df93de81ca98~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>可以分别在浏览器或者小程序中进行预览</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bfaf550c5ad4f88bd4fdcc34b920be1~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>最后看到这个页面就成功</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6f5b00c818f4e44b981e64636abf1f6~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>',46),o=[r];function f(n,b,s,d,l,g){return a(),p("div",null,o)}const m=e(i,[["render",f]]),h=Object.freeze(Object.defineProperty({__proto__:null,__pageData:c,default:m},Symbol.toStringTag,{value:"Module"}));export{h as _,c as __pageData,m as default};
