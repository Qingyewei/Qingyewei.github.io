import{d as P,r as s,o as S,c as I,a as w,F as T,b as B,e as O}from"./vendor.5a93ed3e.js";const N=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))f(u);new MutationObserver(u=>{for(const n of u)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function d(u){const n={};return u.integrity&&(n.integrity=u.integrity),u.referrerpolicy&&(n.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?n.credentials="include":u.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(u){if(u.ep)return;u.ep=!0;const n=d(u);fetch(u.href,n)}};N();const U=w("div",null,"\u51C6\u5907\u5199\u8D2A\u5403\u86C7 canvas",-1),V=P({setup(E){const o=s(null);function d(){const e=o.value;if(e.getContext("2d")){e.width=370,e.height=430;var l=e.getContext("2d");f(l),document.addEventListener("keydown",t=>_(t)),g(l)}else alert("\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301canvas\uFF0C\u8BF7\u6362\u4E2A\u6D4F\u89C8\u5668\u8BD5\u8BD5")}function f(e){e.fillStyle="#b7d4a8",e.fillRect(10,10,350,410),u(e,5,5,360,420,10),u(e,33,33,302,302,0,2),i(e),b(e),A(e),M(e)}function u(e,l,t,r,k,y,D,F){if(2*y>r||2*y>k)return!1;e.save(),e.translate(l,t),n(e,r,k,y),e.lineWidth=D||10,e.strokeStyle=F||"#000",e.stroke(),e.restore()}function n(e,l,t,r){e.beginPath(),e.arc(l-r,t-r,r,0,Math.PI/2),e.lineTo(r,t),e.arc(r,t-r,r,Math.PI/2,Math.PI),e.lineTo(0,r),e.arc(r,r,r,Math.PI,Math.PI*3/2),e.lineTo(l-r,0),e.arc(l-r,r,r,Math.PI*3/2,Math.PI*2),e.lineTo(l,t-r),e.closePath()}function i(e){e.save(),e.font="bold 20px serif",e.fillStyle="#000",e.fillText("SCORE:"+(a.value.length-1),33,383.5),e.restore()}let p=1;function b(e){p=Math.floor((a.value.length-1)/10)+1,e.save(),e.font="bold 20px serif",e.fillStyle="#000",e.fillText("level:"+p,337-e.measureText("level:"+p).width,383.5),e.restore()}let v=s(35),c=s(35);function A(e){let l=Math.round(Math.random()*29)*10+35,t=Math.round(Math.random()*29)*10+35;e.save(),v.value===a.value[0][0]&&c.value===a.value[0][1]?(e.translate(t,l),v.value=t,c.value=l):e.translate(v.value,c.value),e.fillStyle="#000",e.fillRect(0,0,8,8),e.restore()}let a=s([[35,35]]);function M(e){for(let l=0;l<a.value.length;l++)e.save(),e.translate(a.value[l][0],a.value[l][1]),e.fillStyle="#000",e.fillRect(0,0,8,8),e.restore()}let h=s("");function _(e,l){h.value=e.key}let m=s(!0);function g(e){let l=a.value[0][0],t=a.value[0][1];switch(h.value){case"ArrowUp":case"Up":t-=10;break;case"ArrowDown":case"Down":t+=10;break;case"ArrowLeft":case"Left":l-=10;break;case"ArrowRight":case"Right":l+=10;break;default:l+=10;break}if(a.value[1]&&a.value[1][0]===l&&a.value[1][1]===t)switch(h.value){case"ArrowUp":case"Up":t+=20;break;case"ArrowDown":case"Down":t-=20;break;case"ArrowLeft":case"Left":l+=20;break;case"ArrowRight":case"Right":l-=20;break;default:l-=20;break}if(L(l,t),R(),a.value[0][0]=l,a.value[0][1]=t,a.value[0][0]>290+35||a.value[0][0]<35||a.value[0][1]>290+35||a.value[0][1]<35){console.log("\u6211\u649E\u5899\u4E86"),alert("\u6211\u649E\u5899\u4E86 GAME OVER!"),m.value=!1;return}if(C()){alert("\u5403\u5230\u81EA\u5DF1\u4E86 GAME OVER!"),m.value=!1;return}e.clearRect(0,0,370,430),f(e),m.value&&setTimeout(()=>{g(e)},100-(1-1)*30)}function R(){for(let e=a.value.length-1;e>0;e--)a.value[e][0]=a.value[e-1][0],a.value[e][1]=a.value[e-1][1]}function L(e,l){e===v.value&&l===c.value&&a.value.push([e,l])}function C(){for(let e=1;e<a.value.length;e++)if(a.value[0][0]===a.value[e][0]&&a.value[0][1]===a.value[e][1])return console.log("\u5403\u5230\u81EA\u5DF1\u4E86",e),!0;return!1}return S(()=>{d()}),(e,l)=>(B(),I(T,null,[U,w("canvas",{ref_key:"taCanvas",ref:o},null,512)],64))}});O(V).mount("#app");
