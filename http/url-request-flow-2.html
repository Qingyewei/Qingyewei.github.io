<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从输入URL开始建立前端知识体系 | 周星星</title>
    <meta name="description" content="周星星">
    <link rel="preload stylesheet" href="/assets/style.7e8f9fda.css" as="style">
    
    <script type="module" src="/assets/app.76c8c372.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.12b7deed.js">
    <link rel="modulepreload" href="/assets/chunks/theme.5bd5fcbe.js">
    <link rel="modulepreload" href="/assets/algorithm_4.md.41bc0482.js">
    <link rel="modulepreload" href="/assets/algorithm_5.md.b1f1eedf.js">
    <link rel="modulepreload" href="/assets/algorithm_6.md.884381fb.js">
    <link rel="modulepreload" href="/assets/algorithm_7.md.184a7c16.js">
    <link rel="modulepreload" href="/assets/algorithm_8.md.59103daf.js">
    <link rel="modulepreload" href="/assets/algorithm_binary-tree_1.md.b3be167e.js">
    <link rel="modulepreload" href="/assets/algorithm_bitwise-operation_1.md.5c26a212.js">
    <link rel="modulepreload" href="/assets/algorithm_bitwise-operation_2.md.912123f0.js">
    <link rel="modulepreload" href="/assets/algorithm_dynamic-programming_1.md.8e7f986c.js">
    <link rel="modulepreload" href="/assets/algorithm_dynamic-programming_2.md.b88e3d39.js">
    <link rel="modulepreload" href="/assets/algorithm_dynamic-programming_3.md.f2f96d00.js">
    <link rel="modulepreload" href="/assets/algorithm_dynamic-programming_4.md.420b4817.js">
    <link rel="modulepreload" href="/assets/algorithm_dynamic-programming_5.md.a8a639f3.js">
    <link rel="modulepreload" href="/assets/api-examples.md.fd21a1c9.js">
    <link rel="modulepreload" href="/assets/es6_map-set.md.5f37de94.js">
    <link rel="modulepreload" href="/assets/es6_promise.md.96a9c6cc.js">
    <link rel="modulepreload" href="/assets/http_check-url.md.da110c99.js">
    <link rel="modulepreload" href="/assets/http_url-request-flow-2.md.578c10ff.js">
    <link rel="modulepreload" href="/assets/http_url-request-flow.md.212a10ec.js">
    <link rel="modulepreload" href="/assets/index.md.f3b0cb9b.js">
    <link rel="modulepreload" href="/assets/javaScript_arrayFunction.md.6f0343df.js">
    <link rel="modulepreload" href="/assets/javaScript_bind-call-apply.md.3b27ddc0.js">
    <link rel="modulepreload" href="/assets/javaScript_clone.md.ab6df520.js">
    <link rel="modulepreload" href="/assets/javaScript_constructor.md.ea58038f.js">
    <link rel="modulepreload" href="/assets/javaScript_dateObject.md.e4859e24.js">
    <link rel="modulepreload" href="/assets/javaScript_functions-to-10.md.8332c8fc.js">
    <link rel="modulepreload" href="/assets/javaScript_inherit.md.584352d6.js">
    <link rel="modulepreload" href="/assets/javaScript_js-data-types.md.d9ca4aad.js">
    <link rel="modulepreload" href="/assets/javaScript_js-new-behavior.md.e176d2fe.js">
    <link rel="modulepreload" href="/assets/javaScript_scope-closure.md.060a06c4.js">
    <link rel="modulepreload" href="/assets/javaScript_this.md.9093d5bb.js">
    <link rel="modulepreload" href="/assets/markdown-examples.md.eed1f2e6.js">
    <link rel="modulepreload" href="/assets/markdown-examples2.md.c0a43d06.js">
    <link rel="modulepreload" href="/assets/other_axios.md.6da9eb1d.js">
    <link rel="modulepreload" href="/assets/other_base64.md.233bbd54.js">
    <link rel="modulepreload" href="/assets/other_breakpoint-continuation.md.221421c0.js">
    <link rel="modulepreload" href="/assets/other_canvas.md.345f91d5.js">
    <link rel="modulepreload" href="/assets/other_chart-bed.md.3562f099.js">
    <link rel="modulepreload" href="/assets/other_html2canvas.md.7c1d00ab.js">
    <link rel="modulepreload" href="/assets/other_interview.md.c5afa6c6.js">
    <link rel="modulepreload" href="/assets/other_wechat-cloud-hosting.md.019bfb32.js">
    <link rel="modulepreload" href="/assets/react_controlled-and-uncontrolled.md.af0d5e53.js">
    <link rel="modulepreload" href="/assets/react_coriolization_of_high_order_functions.md.2da2ca68.js">
    <link rel="modulepreload" href="/assets/react_hooks.md.a488897c.js">
    <link rel="modulepreload" href="/assets/react_key-and-index.md.f595e398.js">
    <link rel="modulepreload" href="/assets/react_life-cycle.md.5fbb1354.js">
    <link rel="modulepreload" href="/assets/react_setState.md.6fac2e9b.js">
    <link rel="modulepreload" href="/assets/react_state-props-ref.md.974d5659.js">
    <link rel="modulepreload" href="/assets/react_virtual-list.md.63d0c0a3.js">
    <link rel="modulepreload" href="/assets/typeScript_guide.md.73c720b8.js">
    <link rel="modulepreload" href="/assets/vue2_ast.md.6bfffe4e.js">
    <link rel="modulepreload" href="/assets/vue2_dom-diff.md.22174aa6.js">
    <link rel="modulepreload" href="/assets/vue2_mustache.md.8401f011.js">
    <link rel="modulepreload" href="/assets/vue2_responsive.md.8f3b1065.js">
    <link rel="modulepreload" href="/assets/vue2_virtual-list.md.de84cdce.js">
    <link rel="modulepreload" href="/assets/vue3_guide.md.816847de.js">
    <link rel="modulepreload" href="/assets/vue3_persistence.md.eed3348a.js">
    <link rel="modulepreload" href="/assets/vue3_source-code-to-1.md.68c7c0db.js">
    <link rel="modulepreload" href="/assets/vue3_source-code-to-2.md.aa7fbc33.js">
    <link rel="modulepreload" href="/assets/vue3_source-code-to-3.md.7fec2c64.js">
    <link rel="modulepreload" href="/assets/vue3_source-code-to-4.md.c42db70d.js">
    <link rel="modulepreload" href="/assets/vue3_source-code-to-5-1.md.f23e32ff.js">
    <link rel="modulepreload" href="/assets/vue3_source-code-to-5-2.md.f8eafeff.js">
    <link rel="modulepreload" href="/assets/vue3_vue2-vue3-responsive-principle.md.83fd145e.js">
    <link rel="modulepreload" href="/assets/vue3_vuex-ts.md.3b661d8f.js">
    <link rel="modulepreload" href="/assets/chunks/my-lib.es.05322279.js">
    <link rel="modulepreload" href="/assets/http_url-request-flow-2.md.578c10ff.lean.js">
    <script src="https://at.alicdn.com/t/c/font_4314570_6yibn10rb67.js"></script>
    <script src="/loading.js"></script>
    <script src="/test.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="og:title" content="从输入URL开始建立前端知识体系 | VitePress">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!----><!--[-->周星星<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>Vue</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/vue2/virtual-list" data-v-43f1e123><!--[-->Vue2<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/vue3/guide" data-v-43f1e123><!--[-->Vue3<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/react/life-cycle" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>React</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/javaScript/arrayFunction" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>JavaScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/typeScript/guide" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>TypeScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/es6/map-set" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>ES6</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/algorithm/dynamic-programming/1" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>算法</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/http/url-request-flow" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>计算机网络基础知识</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/other/canvas" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>填坑之旅</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>《计算机网络基础知识》笔记</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/http/url-request-flow" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>说一下从url输入到返回请求的过程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/http/url-request-flow-2" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>从输入URL开始建立前端知识体系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/http/check-url" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>正确的校验有效的URL</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _http_url-request-flow-2" data-v-6b87e69f><div><h2 id="前置内容-浏览器主要进程" tabindex="-1">前置内容 浏览器主要进程 <a class="header-anchor" href="#前置内容-浏览器主要进程" aria-label="Permalink to &quot;前置内容 浏览器主要进程&quot;">​</a></h2><p>浏览器是多进程的，主要分为：</p><ul><li>浏览器主进程：只有一个，主要控制页面的创建、销毁、网络资源管理、下载等。</li><li>第三方插件进程：每一种类型的插件对应一个进程，仅当使用该插件时才创建。</li><li>GPU进程：最多一个，用于3D绘制等。</li><li>浏览器渲染进程(浏览器内核)：每个Tab页对应一个进程，互不影响。</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1aeb77a7dafd4ef3b202af4abaed88c2~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h2 id="第一部分-输入网址并解析" tabindex="-1">第一部分 输入网址并解析 <a class="header-anchor" href="#第一部分-输入网址并解析" aria-label="Permalink to &quot;第一部分 输入网址并解析&quot;">​</a></h2><p>这里我们只考虑输入的是一个URL 结构字符串，如果是非 URL 结构的字符串，则会用浏览器默认的搜索引擎搜索该字符串。</p><h3 id="url的组成" tabindex="-1">URL的组成 <a class="header-anchor" href="#url的组成" aria-label="Permalink to &quot;URL的组成&quot;">​</a></h3><p>URL 主要由 <code>协议</code>、<code>主机</code>、<code>端口</code>、<code>路径</code>、<code>查询参数</code>、<code>锚点</code>6部分组成！</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a81e56741984fbe88d38071f3ead446~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="解析url" tabindex="-1">解析URL <a class="header-anchor" href="#解析url" aria-label="Permalink to &quot;解析URL&quot;">​</a></h3><p>输入URL后，浏览器会解析出协议、主机、端口、路径等信息，并构造一个HTTP请求。</p><ol><li>浏览器发送请求前，根据请求头的<code>expires</code>和<code>cache-control</code>判断是否命中（包括是否过期）强缓存策略，如果命中，直接从缓存获取资源，并不会发送请求。如果没有命中，则进入下一步。</li><li>没有命中强缓存规则，浏览器会发送请求，根据请求头的<code>If-Modified-Since</code>和<code>If-None-Match</code>判断是否命中协商缓存，如果命中，直接从缓存获取资源。如果没有命中，则进入下一步。</li><li>如果前两步都没有命中，则直接从服务端获取资源。</li></ol><h4 id="hsts" tabindex="-1">HSTS <a class="header-anchor" href="#hsts" aria-label="Permalink to &quot;HSTS&quot;">​</a></h4><p>由于安全隐患，会使用 HSTS 强制客户端使用 HTTPS 访问页面。详见：<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.barretlee.com%2Fblog%2F2015%2F10%2F22%2Fhsts-intro%2F" title="https://www.barretlee.com/blog/2015/10/22/hsts-intro/" target="_blank" rel="noreferrer">你所不知道的 HSTS</a>。 当你的网站均采用 HTTPS，并符合它的安全规范，就可以申请加入 HSTS 列表，之后用户不加 HTTPS 协议再去访问你的网站，浏览器都会定向到 HTTPS。无论匹配到没有，都要开始 DNS 查询工作了。</p><h3 id="浏览器缓存" tabindex="-1">浏览器缓存 <a class="header-anchor" href="#浏览器缓存" aria-label="Permalink to &quot;浏览器缓存&quot;">​</a></h3><h4 id="强缓存" tabindex="-1">强缓存 <a class="header-anchor" href="#强缓存" aria-label="Permalink to &quot;强缓存&quot;">​</a></h4><p>强制缓存就是向浏览器缓存查找该请求结果，并根据该结果的缓存规则来决定是否使用该缓存结果的过程。强缓存又分为两种<code>Expires</code>和<code>Cache-Control</code></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2dc02502d00143adaac2389183a42aeb~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h5 id="expires" tabindex="-1">Expires <a class="header-anchor" href="#expires" aria-label="Permalink to &quot;Expires&quot;">​</a></h5><ul><li>版本：HTTP/1.0</li><li>来源：存在于服务端返回的响应头中</li><li>语法：Expires: Wed, 22 Nov 2019 08:41:00 GMT</li><li>缺点：服务器的时间和浏览器的时间可能并不一致导致失效</li></ul><h5 id="cache-control" tabindex="-1">Cache-Control <a class="header-anchor" href="#cache-control" aria-label="Permalink to &quot;Cache-Control&quot;">​</a></h5><ul><li>版本：HTTP/1.1</li><li>来源：响应头和请求头</li><li>语法：Cache-Control:max-age=3600</li><li>缺点：时间最终还是会失效</li></ul><p>请求头：</p><table><thead><tr><th>字段名称</th><th>说明</th></tr></thead><tbody><tr><td>no-cache</td><td>告知(代理)服务器不直接使用缓存，要求向原服务器发起请求</td></tr><tr><td>no-store</td><td>所有内容都不会被保存到缓存或Internet临时文件中</td></tr><tr><td>max-age=delta-seconds</td><td>告知服务器客户端希望接收一个存在时间不大于delta-secconds秒的资源</td></tr><tr><td>max-stale[=delta-seconds]</td><td>告知(代理)服务器客户端愿意接收一个超过缓存时间的资源，若有定义delta-seconds则为delta-seconds秒，若没有则为任意超出时间</td></tr><tr><td>min-fresh=delta-seconds</td><td>告知(代理)服务器客户端希望接收一个在小于delta-seconds秒内被更新过的资源</td></tr><tr><td>no-transform</td><td>告知(代理)服务器客户端希望获取实体数据没有被转换(比如压缩)过的资源</td></tr><tr><td>noly-if-cached</td><td>告知(代理)服务器客户端希望获取缓存的内容(若有),而不用向原服务器发去请求</td></tr><tr><td>cache-extension</td><td>自定义扩展值，若服务器不识别该值将被忽略掉</td></tr></tbody></table><p>响应头：</p><table><thead><tr><th>字段名称</th><th>说明</th></tr></thead><tbody><tr><td>public</td><td>表明任何情况下都得缓存该资源(即使是需要HTTP认证的资源)</td></tr><tr><td>Private=[field-name]</td><td>表明返回报文中全部或部分(若指定了field-name则为field-name的字段数据)仅开放给某些用户(服务器指定的share-user，如代理服务器)做缓存使用，其他用户则不能缓存这些数据</td></tr><tr><td>no-cache</td><td>不直接使用缓存，要求向服务器发起(新鲜度校验)请求</td></tr><tr><td>no-store</td><td>所以内容都不会被保存到缓存或Internet临时文件中</td></tr><tr><td>no-transform</td><td>告知客户端缓存文件时不得对实体数据做任何改变</td></tr><tr><td>noly-if-cached</td><td>告知(代理)服务器客户端希望获取缓存的内容(若有),而不用向原服务器发去请求</td></tr><tr><td>must-revalidate</td><td>当前资源一定是向原方法服务器发去验证请求的，如请求是吧会返回504(而非代理服务器上的缓存)</td></tr><tr><td>proxy-revalidate</td><td>与must-revalidate类似，但仅能应用于共享缓存(如代理)</td></tr><tr><td>max-age=delta-seconds</td><td>告知客户端该资源在delta-seconds秒内是新鲜的，无需向服务器发请求</td></tr><tr><td>s-maxage=delta-seconds</td><td>同max-age，但仅能应用于共享缓存(如代理)</td></tr><tr><td>cache-extension</td><td>自定义扩展值，若服务器不识别该值将被忽略掉</td></tr></tbody></table><p>示例：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// server.js</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">http</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;http&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">fs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;fs&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">http.</span><span style="color:#B392F0;">createServer</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">request</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;request come&#39;</span><span style="color:#E1E4E8;">, request.url)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (request.url </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">html</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">readFileSync</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;test.html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.</span><span style="color:#B392F0;">writeHead</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;Content-Type&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;text/html&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">(html)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (request.url </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/script.js&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.</span><span style="color:#B392F0;">writeHead</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;Content-Type&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;text/javascript&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&#39;Cache-Control&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;max-age=20,public&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 缓存20s 多个值用逗号分开</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;console.log(&quot;script loaded&quot;)&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}).</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">8888</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;server listening on 8888&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// server.js</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">http</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;http&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">fs</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;fs&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">http.</span><span style="color:#6F42C1;">createServer</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">request</span><span style="color:#24292E;">, </span><span style="color:#E36209;">response</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;request come&#39;</span><span style="color:#24292E;">, request.url)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (request.url </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">html</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">readFileSync</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;test.html&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;utf8&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    response.</span><span style="color:#6F42C1;">writeHead</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;Content-Type&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;text/html&#39;</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    response.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">(html)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (request.url </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/script.js&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    response.</span><span style="color:#6F42C1;">writeHead</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;Content-Type&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;text/javascript&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&#39;Cache-Control&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;max-age=20,public&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 缓存20s 多个值用逗号分开</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    response.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;console.log(&quot;script loaded&quot;)&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}).</span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">8888</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;server listening on 8888&#39;</span><span style="color:#24292E;">)</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// test.html</span></span>
<span class="line"><span style="color:#F97583;">&lt;!</span><span style="color:#79B8FF;">DOCTYPE</span><span style="color:#E1E4E8;"> html</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;en&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">charset</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;UTF-8&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;viewport&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">http-equiv</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;ie=edge&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">&gt;Document&lt;/</span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// test.html</span></span>
<span class="line"><span style="color:#D73A49;">&lt;!</span><span style="color:#005CC5;">DOCTYPE</span><span style="color:#24292E;"> html</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">html</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;en&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">head</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">charset</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;UTF-8&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;viewport&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">http-equiv</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;X-UA-Compatible&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ie=edge&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">title</span><span style="color:#24292E;">&gt;Document&lt;/</span><span style="color:#22863A;">title</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">head</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/883bfbc074bb4f00b1a27a6631682666~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p><h4 id="协商缓存" tabindex="-1">协商缓存 <a class="header-anchor" href="#协商缓存" aria-label="Permalink to &quot;协商缓存&quot;">​</a></h4><p>协商缓存就是强制缓存失效后，浏览器携带缓存标识向服务器发起请求，由服务器根据缓存标识决定是否使用缓存的过程。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/240a87eb963c49258d96b7527497b141~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h5 id="模拟last-modified" tabindex="-1">模拟Last-Modified <a class="header-anchor" href="#模拟last-modified" aria-label="Permalink to &quot;模拟Last-Modified&quot;">​</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (request.url </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/index.js&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">filePath</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(__dirname, request.url); </span><span style="color:#6A737D;">// 拼接当前脚本文件地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">stat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">statSync</span><span style="color:#E1E4E8;">(filePath); </span><span style="color:#6A737D;">// 获取当前脚本状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">mtime</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> stat.mtime.</span><span style="color:#B392F0;">toGMTString</span><span style="color:#E1E4E8;">() </span><span style="color:#6A737D;">// 文件的最后修改时间</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">requestMtime</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> request.headers[</span><span style="color:#9ECBFF;">&#39;if-modified-since&#39;</span><span style="color:#E1E4E8;">]; </span><span style="color:#6A737D;">// 来自浏览器传递的值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(stat);</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(mtime, requestMtime);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 走协商缓存</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (mtime </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> requestMtime) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      response.statusCode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">304</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      response.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 协商缓存失效，重新读取数据设置 Last-Modified 响应头</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;协商缓存 Last-Modified 失效&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.</span><span style="color:#B392F0;">writeHead</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;Content-Type&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;text/javascript&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;Last-Modified&#39;</span><span style="color:#E1E4E8;">: mtime,</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">readStream</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">createReadStream</span><span style="color:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="color:#E1E4E8;">    readStream.</span><span style="color:#B392F0;">pipe</span><span style="color:#E1E4E8;">(response);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (request.url </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/index.js&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">filePath</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> path.</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(__dirname, request.url); </span><span style="color:#6A737D;">// 拼接当前脚本文件地址</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">stat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">statSync</span><span style="color:#24292E;">(filePath); </span><span style="color:#6A737D;">// 获取当前脚本状态</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">mtime</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> stat.mtime.</span><span style="color:#6F42C1;">toGMTString</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">// 文件的最后修改时间</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">requestMtime</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> request.headers[</span><span style="color:#032F62;">&#39;if-modified-since&#39;</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 来自浏览器传递的值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(stat);</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(mtime, requestMtime);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 走协商缓存</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (mtime </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> requestMtime) {</span></span>
<span class="line"><span style="color:#24292E;">      response.statusCode </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">304</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      response.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 协商缓存失效，重新读取数据设置 Last-Modified 响应头</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;协商缓存 Last-Modified 失效&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    response.</span><span style="color:#6F42C1;">writeHead</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;Content-Type&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;text/javascript&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;Last-Modified&#39;</span><span style="color:#24292E;">: mtime,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">readStream</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">createReadStream</span><span style="color:#24292E;">(filePath);</span></span>
<span class="line"><span style="color:#24292E;">    readStream.</span><span style="color:#6F42C1;">pipe</span><span style="color:#24292E;">(response);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7e2529db9444c40a73ba020a83e2c49~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/29221dd7c3ee4228bbae0ebb3eeb7524~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/10cfc493047c4f57a471c00d2295635b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h5 id="模拟etag" tabindex="-1">模拟ETag <a class="header-anchor" href="#模拟etag" aria-label="Permalink to &quot;模拟ETag&quot;">​</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (request.url </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/index.js&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">filePath</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(__dirname, request.url); </span><span style="color:#6A737D;">// 拼接当前脚本文件地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">buffer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">readFileSync</span><span style="color:#E1E4E8;">(filePath); </span><span style="color:#6A737D;">// 获取当前脚本状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">fileMd5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">md5</span><span style="color:#E1E4E8;">(buffer); </span><span style="color:#6A737D;">// 文件的 md5 值</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">noneMatch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> request.headers[</span><span style="color:#9ECBFF;">&#39;if-none-match&#39;</span><span style="color:#E1E4E8;">]; </span><span style="color:#6A737D;">// 来自浏览器端传递的值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (noneMatch </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> fileMd5) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        response.statusCode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">304</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        response.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Etag 缓存失效&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    response.</span><span style="color:#B392F0;">writeHead</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;Content-Type&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;text/javascript&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;Cache-Control&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;max-age=0&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;ETag&#39;</span><span style="color:#E1E4E8;">: fileMd5,</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">readStream</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">createReadStream</span><span style="color:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="color:#E1E4E8;">    readStream.</span><span style="color:#B392F0;">pipe</span><span style="color:#E1E4E8;">(response);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (request.url </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/index.js&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">filePath</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> path.</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(__dirname, request.url); </span><span style="color:#6A737D;">// 拼接当前脚本文件地址</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">buffer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">readFileSync</span><span style="color:#24292E;">(filePath); </span><span style="color:#6A737D;">// 获取当前脚本状态</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">fileMd5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">md5</span><span style="color:#24292E;">(buffer); </span><span style="color:#6A737D;">// 文件的 md5 值</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">noneMatch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> request.headers[</span><span style="color:#032F62;">&#39;if-none-match&#39;</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 来自浏览器端传递的值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (noneMatch </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> fileMd5) {</span></span>
<span class="line"><span style="color:#24292E;">        response.statusCode </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">304</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        response.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Etag 缓存失效&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    response.</span><span style="color:#6F42C1;">writeHead</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;Content-Type&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;text/javascript&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;Cache-Control&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;max-age=0&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;ETag&#39;</span><span style="color:#24292E;">: fileMd5,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">readStream</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">createReadStream</span><span style="color:#24292E;">(filePath);</span></span>
<span class="line"><span style="color:#24292E;">    readStream.</span><span style="color:#6F42C1;">pipe</span><span style="color:#24292E;">(response);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3545b58012e446e2b293ddb426e43241~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da61badf03084cc69fd07c9d9b788af9~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p><h5 id="last-modified-响应头-if-modified-since-请求头" tabindex="-1">Last-Modified(响应头)，If-Modified-Since(请求头) <a class="header-anchor" href="#last-modified-响应头-if-modified-since-请求头" aria-label="Permalink to &quot;Last-Modified(响应头)，If-Modified-Since(请求头)&quot;">​</a></h5><p>在浏览器第一次给服务器发送请求后，服务器会在响应头中加上这个字段。 浏览器接收到后，如果再次请求，会在请求头中携带<code>If-Modified-Since</code>字段，这个字段的值也就是服务器传来的最后修改时间。 服务器拿到请求头中的<code>If-Modified-Since</code>的字段后，其实会和这个服务器中该资源的最后修改时间<code>Last-Modified</code>对比,询问服务器在该日期后资源是否有更新，有更新的话就会将新的资源发送回来。</p><p>但是如果在本地打开缓存文件，就会造成 <code>Last-Modified</code> 被修改，所以在 <code>HTTP / 1.1</code> 出现了 <code>ETag</code>。</p><h5 id="etag-响应头-、if-none-match-请求头" tabindex="-1">ETag(响应头)、If-None-Match(请求头) <a class="header-anchor" href="#etag-响应头-、if-none-match-请求头" aria-label="Permalink to &quot;ETag(响应头)、If-None-Match(请求头)&quot;">​</a></h5><p><code>ETag</code>是服务器根据当前文件的内容，给文件生成的唯一标识，只要里面的内容有改动，这个值就会变。服务器通过响应头把这个值给浏览器。 浏览器接收到ETag的值，会在下次请求时，将这个值作为<code>If-None-Match</code>这个字段的内容，并放到请求头中，然后发给服务器。</p><blockquote><p>如果两种方式都支持的话，服务器会优先考虑ETag</p></blockquote><h4 id="存储位置" tabindex="-1">存储位置 <a class="header-anchor" href="#存储位置" aria-label="Permalink to &quot;存储位置&quot;">​</a></h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/98ea0e2d32464d86a93026327b0d17ba~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><ul><li>Service Worker</li></ul><p><code>Service Worker</code> 是运行在浏览器背后的独立线程，一般可以用来实现缓存功能。使用 <code>Service Worker</code>的话，传输协议必须为 <code>HTTPS</code>。因为 <code>Service Worker</code> 中涉及到请求拦截，所以必须使用 <code>HTTPS</code> 协议来保障安全。<code>Service Worker</code> 的缓存与浏览器其他内建的缓存机制不同，它可以让我们自由控制缓存哪些文件、如何匹配缓存、如何读取缓存，并且缓存是持续性的。</p><p><code>Service Worker</code> 实现缓存功能一般分为三个步骤：首先需要先注册 <code>Service Worker</code>，然后监听到 <code>install</code> 事件以后就可以缓存需要的文件，那么在下次用户访问的时候就可以通过拦截请求的方式查询是否存在缓存，存在缓存的话就可以直接读取缓存文件，否则就去请求数据。</p><p>当 <code>Service Worker</code> 没有命中缓存的时候，我们需要去调用 <code>fetch</code> 函数获取数据。也就是说，如果我们没有在 <code>Service Worker</code> 命中缓存的话，会根据缓存查找优先级去查找数据。但是不管我们是从 <code>Memory Cache</code> 中还是从网络请求中获取的数据，浏览器都会显示我们是从 <code>Service Worker</code>中获取的内容。</p><ul><li>Memory Cache</li></ul><p><code>Memory Cache</code> 也就是内存中的缓存，主要包含的是当前中页面中已经抓取到的资源,例如页面上已经下载的样式、脚本、图片等。读取内存中的数据肯定比磁盘快,内存缓存虽然读取高效，可是缓存持续性很短，会随着进程的释放而释放。 一旦我们关闭Tab页面，内存中的缓存也就被释放了。</p><p>那么既然内存缓存这么高效，我们是不是能让数据都存放在内存中呢？ 这是不可能的。计算机中的内存一定比硬盘容量小得多，操作系统需要精打细算内存的使用，所以能让我们使用的内存必然不多。</p><blockquote><p>需要注意的事情是，内存缓存在缓存资源时并不关心返回资源的HTTP缓存头<code>Cache-Control</code>是什么值，同时资源的匹配也并非仅仅是对URL做匹配，还可能会对<code>Content-Type</code>，CORS等其他特征做校验。</p></blockquote><ul><li>Disk Cache</li></ul><p><code>Disk Cache</code> 也就是存储在硬盘中的缓存，读取速度慢点，但是什么都能存储到磁盘中，比之 <code>Memory Cache</code> 胜在容量和存储时效性上。</p><ul><li>Push Cache</li></ul><p><code>Push Cache</code>（推送缓存）是 <code>HTTP/2</code> 中的内容，当以上三种缓存都没有命中时，它才会被使用。它只在会话（Session）中存在，一旦会话结束就被释放，并且缓存时间也很短暂，在Chrome浏览器中只有5分钟左右，同时它也并非严格执行HTTP头中的缓存指令。</p><ol><li>所有的资源都能被推送，并且能够被缓存,但是 <code>Edge</code> 和 <code>Safari</code> 浏览器支持相对比较差</li><li>可以推送 <code>no-cache</code> 和 <code>no-store</code> 的资源</li><li>一旦连接被关闭，<code>Push Cache</code> 就被释放</li><li>多个页面可以使用同一个<code>HTTP/2</code>的连接，也就可以使用同一个<code>Push Cache</code>。这主要还是依赖浏览器的实现而定，出于对性能的考虑，有的浏览器会对相同域名但不同的tab标签使用同一个HTTP连接。</li><li><code>Push Cache</code> 中的缓存只能被使用一次</li><li>浏览器可以拒绝接受已经存在的资源推送</li><li>你可以给其他域名推送资源</li></ol><h3 id="dns域名解析" tabindex="-1">DNS域名解析 <a class="header-anchor" href="#dns域名解析" aria-label="Permalink to &quot;DNS域名解析&quot;">​</a></h3><p>在发起http请求之前，浏览器首先要做去获得我们想访问网页的IP地址，浏览器会发送一个UDP的包给DNS域名解析服务器。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/974fa14ecc0d45478931b376640d8e32~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h4 id="递归查询" tabindex="-1">递归查询 <a class="header-anchor" href="#递归查询" aria-label="Permalink to &quot;递归查询&quot;">​</a></h4><p>我们的浏览器、操作系统、路由器都会缓存一些URL对应的IP地址，统称为DNS高速缓存。这是为了加快DNS解析速度，使得不必每次都到根域名服务器中去查询。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5607075029a74a659277d10461c1bf8b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h4 id="迭代查询" tabindex="-1">迭代查询 <a class="header-anchor" href="#迭代查询" aria-label="Permalink to &quot;迭代查询&quot;">​</a></h4><p>迭代查询的方式就是，局部的DNS服务器并不会自己向其他服务器进行查询，而是把能够解析该域名的服务器IP地址返回给客户端，客户端会不断的向这些服务器进行查询，直到查询到了位置，迭代的话只会帮你找到相关的服务器，然后说我现在比较忙，你自己去找吧。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32c0f4bcbfcb49a196e3d8582786d921~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h4 id="dns负载均衡" tabindex="-1">DNS负载均衡 <a class="header-anchor" href="#dns负载均衡" aria-label="Permalink to &quot;DNS负载均衡&quot;">​</a></h4><p>DNS还有负载均衡的作用，现在很多网站都有多个服务器，当一个网站访问量过大的时候，如果所有请求都请求在同一个服务器上，可能服务器就会崩掉，这时候就用到了DNS负载均衡技术，当一个网站有多个服务器地址时，在应答DNS查询的时候，DNS服务器会对每个查询返回不同的解析结果，也就是返回不同的IP地址，从而把访问引导到不同的服务器上去，来达到负载均衡的目的。例如可以根据每台机器的负载量，或者该机器距离用户的地理位置距离等等条件。</p><h4 id="dns预解析" tabindex="-1">DNS预解析 <a class="header-anchor" href="#dns预解析" aria-label="Permalink to &quot;DNS预解析&quot;">​</a></h4><p>大型网站，有多个不同服务器资源的情况下，都可采取DNS预解析，提前解析，减少页面卡顿。 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4eaa8d031a9a4ebdacf305e73227ff79~tplv-k3u1fbpfcp-zoom-1.image" alt="WeChata927fb47ad19a95887884e244ccc127a.png"></p><h2 id="第二部分-tcp-ip连接-三次握手" tabindex="-1">第二部分 TCP/IP连接：三次握手 <a class="header-anchor" href="#第二部分-tcp-ip连接-三次握手" aria-label="Permalink to &quot;第二部分 TCP/IP连接：三次握手&quot;">​</a></h2><h3 id="网络协议分层" tabindex="-1">网络协议分层 <a class="header-anchor" href="#网络协议分层" aria-label="Permalink to &quot;网络协议分层&quot;">​</a></h3><p><img src="" alt=""></p><h3 id="tcp-ip协议" tabindex="-1">TCP/IP协议 <a class="header-anchor" href="#tcp-ip协议" aria-label="Permalink to &quot;TCP/IP协议&quot;">​</a></h3><p>TCP(Transmission Control Protocol)传输控制协议。 TCP/IP协议将应用层、表示层、会话层合并为应用层，物理层和数据链路层合并为网络接口层。</p><blockquote><p>TCP/IP协议不仅仅指的是TCP和IP两个协议，⽽是指的⼀个由FTP,SMTP,TCP,UDP,IP,ARP等等协议构成的协议集合。</p></blockquote><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd5d0a0c19d441e792159fe67238869b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="三次握手" tabindex="-1">三次握手 <a class="header-anchor" href="#三次握手" aria-label="Permalink to &quot;三次握手&quot;">​</a></h3><p>客服端和服务端在进行http请求和返回的工程中，需要创建一个<code>TCP connection</code>（由客户端发起）,<code>http</code>不存在连接这个概念，它只有请求和响应。请求和响应都是数据包，它们之间的传输通道就是<code>TCP connection</code>。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c568546ac01541c98552b2502a9a5acc~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>位码即tcp标志位，有6种标示：</p><ul><li>SYN(synchronous建立联机)</li><li>ACK(acknowledgement 确认)</li><li>PSH(push传送)</li><li>FIN(finish结束)</li><li>RST(reset重置)</li><li>URG(urgent紧急)</li></ul><p>第一次握手：主机A发送位码为<code>SYN＝1</code>，随机产生<code>Seq number=1234567</code>的数据包到服务器，主机B由<code>SYN=1</code>知道，A要求建立联机；（第一次握手，由浏览器发起，告诉服务器我要发送请求了）</p><p>第二次握手：主机B收到请求后要确认联机信息，向A发送<code>ack number=(主机A的seq+1)</code>，<code>SUN=1，ACK=1234567 + 1</code>，随机产生<code>Seq=7654321</code>的包；（第二次握手，由服务器发起，告诉浏览器我准备接受了，你赶紧发送吧）</p><p>第三次握手：主机A收到后检查<code>ack number</code>是否正确，即第一次发送的<code>seq number+1</code>，以及位码<code>SYN</code>是否为1，若正确，主机A会再发送<code>ack number=(主机B的seq+1)</code>，<code>ack=7654321 + 1</code>，主机B收到后确认<code>Seq</code>值与<code>ACK=7654321+ 1</code>则连接建立成功；（第三次握手，由浏览器发送，告诉服务器，我马上就发了，准备接受吧）</p><blockquote><p>总是要问：为什么需要三次握手，两次不行吗？其实这是由TCP的自身特点<strong>可靠传输</strong>决定的。客户端和服务端要进行可靠传输，那么就需要<strong>确认双方的<code>接收</code>和<code>发送</code>能力</strong>。第一次握手可以确认客服端的<code>发送能力</code>,第二次握手，服务端<code>SYN=1,Seq=Y</code>就确认了<code>发送能力</code>,<code>ACK=X+1</code>就确认了<code>接收能力</code>,所以第三次握手才可以确认客户端的<code>接收能力</code>。不然容易出现丢包的现象。</p></blockquote><h4 id="第三次握手的必要性" tabindex="-1">第三次握手的必要性？ <a class="header-anchor" href="#第三次握手的必要性" aria-label="Permalink to &quot;第三次握手的必要性？&quot;">​</a></h4><p>试想如果是用两次握手，则会出现下面这种情况： 如客户端发出连接请求，但因连接请求报文丢失而未收到确认，于是客户端再重传一次连接请求。后来收到了确认，建立了连接。数据传输完毕后，就释放了连接，客户端共发出了两个连接请求报文段，其中第一个丢失，第二个到达了服务端，但是第一个丢失的报文段只是在某些网络结点长时间滞留了，延误到连接释放以后的某个时间才到达服务端，此时服务端误认为客户端又发出一次新的连接请求，于是就向客户端发出确认报文段，同意建立连接，不采用三次握手，只要服务端发出确认，就建立新的连接了，此时客户端忽略服务端发来的确认，也不发送数据，则服务端一致等待客户端发送数据，浪费资源。</p><h4 id="什么是半连接队列" tabindex="-1">什么是半连接队列？ <a class="header-anchor" href="#什么是半连接队列" aria-label="Permalink to &quot;什么是半连接队列？&quot;">​</a></h4><p>服务器第一次收到客户端的 SYN 之后，就会处于 SYN_RCVD 状态，此时双方还没有完全建立其连接，服务器会把此种状态下请求连接放在一个队列里，我们把这种队列称之为半连接队列。</p><p>当然还有一个全连接队列，就是已经完成三次握手，建立起连接的就会放在全连接队列中。如果队列满了就有可能会出现丢包现象。</p><p>这里在补充一点关于SYN-ACK 重传次数的问题： 服务器发送完SYN-ACK包，如果未收到客户确认包，服务器进行首次重传，等待一段时间仍未收到客户确认包，进行第二次重传。如果重传次数超过系统规定的最大重传次数，系统将该连接信息从半连接队列中删除。</p><p>注意，每次重传等待的时间不一定相同，一般会是指数增长，例如间隔时间为 1s，2s，4s，8s…</p><h4 id="isn是固定的吗" tabindex="-1">ISN是固定的吗？ <a class="header-anchor" href="#isn是固定的吗" aria-label="Permalink to &quot;ISN是固定的吗？&quot;">​</a></h4><p>当一端为建立连接而发送它的SYN时，它为连接选择一个初始序号。ISN随时间而变化，因此每个连接都将具有不同的ISN。ISN可以看作是一个32比特的计数器，每4ms加1 。这样选择序号的目的在于防止在网络中被延迟的分组在以后又被传送，而导致某个连接的一方对它做错误的解释。</p><p>三次握手的其中一个重要功能是客户端和服务端交换 ISN(Initial Sequence Number)，以便让对方知道接下来接收数据的时候如何按序列号组装数据。如果 ISN 是固定的，攻击者很容易猜出后续的确认号，因此 ISN 是动态生成的。</p><h4 id="三次握手过程中可以携带数据吗" tabindex="-1">三次握手过程中可以携带数据吗？ <a class="header-anchor" href="#三次握手过程中可以携带数据吗" aria-label="Permalink to &quot;三次握手过程中可以携带数据吗？&quot;">​</a></h4><p>其实第三次握手的时候，是可以携带数据的。但是，第一次、第二次握手不可以携带数据。</p><p>为什么这样呢?大家可以想一个问题，假如第一次握手可以携带数据的话，如果有人要恶意攻击服务器，那他每次都在第一次握手中的 SYN 报文中放入大量的数据。因为攻击者根本就不理服务器的接收、发送能力是否正常，然后疯狂着重复发 SYN 报文的话，这会让服务器花费很多时间、内存空间来接收这些报文。</p><p>也就是说，第一次握手不可以放数据，其中一个简单的原因就是会让服务器更加容易受到攻击了。而对于第三次的话，此时客户端已经处于 ESTABLISHED 状态。对于客户端来说，他已经建立起连接了，并且也已经知道服务器的接收、发送能力是正常的了，所以能携带数据也没啥毛病。</p><h4 id="syn攻击" tabindex="-1">SYN攻击？ <a class="header-anchor" href="#syn攻击" aria-label="Permalink to &quot;SYN攻击？&quot;">​</a></h4><p>服务器端的资源分配是在二次握手时分配的，而客户端的资源是在完成三次握手时分配的，所以服务器容易受到SYN洪泛攻击。SYN攻击就是Client在短时间内伪造大量不存在的IP地址，并向Server不断地发送SYN包，Server则回复确认包，并等待Client确认，由于源地址不存在，因此Server需要不断重发直至超时，这些伪造的SYN包将长时间占用未连接队列，导致正常的SYN请求因为队列满而被丢弃，从而引起网络拥塞甚至系统瘫痪。SYN 攻击是一种典型的 DoS/DDoS 攻击。</p><p>检测 SYN 攻击非常的方便，当你在服务器上看到大量的半连接状态时，特别是源IP地址是随机的，基本上可以断定这是一次SYN攻击。在 Linux/Unix 上可以使用系统自带的 netstats 命令来检测 SYN 攻击。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">netstat </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">n </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">TCP</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> grep </span><span style="color:#79B8FF;">SYN_RECV</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">netstat </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">n </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">TCP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> grep </span><span style="color:#005CC5;">SYN_RECV</span></span></code></pre></div><p>常见的防御 SYN 攻击的方法有如下几种：</p><ul><li>缩短超时（SYN Timeout）时间</li><li>增加最大半连接数</li><li>过滤网关防护</li><li>SYN cookies技术</li></ul><h2 id="第三部分-http请求" tabindex="-1">第三部分 HTTP请求 <a class="header-anchor" href="#第三部分-http请求" aria-label="Permalink to &quot;第三部分 HTTP请求&quot;">​</a></h2><h3 id="http-发展历史" tabindex="-1">HTTP 发展历史 <a class="header-anchor" href="#http-发展历史" aria-label="Permalink to &quot;HTTP 发展历史&quot;">​</a></h3><p>HTTP/0.9</p><ul><li>只有一个命令GET</li><li>响应类型: 仅 超文本</li><li>没有header等描述数据的信息</li><li>服务器发送完毕，就关闭TCP连接</li></ul><p>HTTP/1.0</p><ul><li>增加了很多命令（post HESD ）</li><li>增加<code>status code</code> 和 <code>header</code></li><li>多字符集支持、多部分发送、权限、缓存等</li><li>响应：不再只限于超文本 (Content-Type 头部提供了传输 HTML 之外文件的能力 — 如脚本、样式或媒体文件)</li></ul><p>HTTP/1.1</p><ul><li>持久连接。TCP三次握手会在任何连接被建立之前发生一次。最终，当发送了所有数据之后，服务器发送一个消息，表示不会再有更多数据向客户端发送了；则客户端才会关闭连接（断开 TCP）</li><li>支持的方法: <code>GET</code> , <code>HEAD</code> , <code>POST</code> , <code>PUT</code> ,<code>DELETE</code> , <code>TRACE</code> , <code>OPTIONS</code></li><li>进行了重大的性能优化和特性增强，分块传输、压缩/解压、内容缓存磋商、虚拟主机（有单个IP地址的主机具有多个域名）、更快的响应，以及通过增加缓存节省了更多的带宽</li></ul><p>HTTP2</p><ul><li>所有数据以二进制传输。HTTP1.x是基于文本的，无法保证健壮性，HTTP2.0绝对使用新的二进制格式，方便且健壮</li><li>同一个连接里面发送多个请求不再需要按照顺序来</li><li>头信息压缩以及推送等提高效率的功能</li></ul><p>HTTP3</p><ul><li>QUIC“快速UDP互联网连接”（Quick UDP Internet Connections）</li></ul><p>HTTP3 的主要改进在传输层上。传输层不会再有我前面提到的那些繁重的 TCP 连接了。现在，一切都会走 UDP。</p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhttp3-explained.haxx.se%2Fzh%2Fzh" title="https://http3-explained.haxx.se/zh/zh" target="_blank" rel="noreferrer">HTTP3详细介绍</a></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3c4bb92d21b408f902b4141cd7946dc~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="http协议特点" tabindex="-1">HTTP协议特点 <a class="header-anchor" href="#http协议特点" aria-label="Permalink to &quot;HTTP协议特点&quot;">​</a></h3><ol><li>支持客户/服务器模式。</li><li>简单快速客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有 GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于 HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</li><li>灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type（Content-Type是HTTP包中用来表示内容类型的标识）加以标记。</li><li>无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。</li><li>无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</li></ol><blockquote><p>现在 HTTP3 最快！</p></blockquote><h3 id="http报文" tabindex="-1">HTTP报文 <a class="header-anchor" href="#http报文" aria-label="Permalink to &quot;HTTP报文&quot;">​</a></h3><p>HTTP报文是面向文本的，报文中的每一个字段都是一些ASCII码串，各个字段的长度是不确定的。HTTP有两类报文：请求报文和响应报文。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ac7c510d4d649449a729926f2f1e34e~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p><h4 id="请求报文" tabindex="-1">请求报文 <a class="header-anchor" href="#请求报文" aria-label="Permalink to &quot;请求报文&quot;">​</a></h4><p>HTTP的请求报文由四部分组成（请求行+请求头部+空行+请求体）：<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8cecf524a944da3ad26327fc6f32fa9~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"><br><strong>真实数据</strong><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eabdc7f93e0240e49b6cf605db161e73~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"><br><strong>①是请求方法</strong>，GET和POST是最常见的HTTP方法，除此以外还包括DELETE、HEAD、OPTIONS、PUT、TRACE。不过，当前的大多数浏览器只支持GET和POST，Spring 3.0提供了一个HiddenHttpMethodFilter，允许你通过“_method”的表单参数指定这些特殊的HTTP方法（实际上还是通过POST提交表单）。服务端配置了HiddenHttpMethodFilter后，Spring会根据_method参数指定的值模拟出相应的HTTP方法，这样，就可以使用这些HTTP方法对处理方法进行映射了。</p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FxxxS5qG244F6L10Y_ZxyGQ" title="https://mp.weixin.qq.com/s/xxxS5qG244F6L10Y_ZxyGQ" target="_blank" rel="noreferrer">请求方法详解一篇让你彻底搞定HTTP方法与状态码​</a></p><p><strong>②为请求对应的URL地址</strong>，它和报文头的Host属性组成完整的请求URL，</p><p><strong>③是协议名称及版本号</strong>。</p><p><strong>④是HTTP的报文头</strong> ，报文头包含若干个属性，格式为“属性名:属性值”，服务端据此获取客户端的信息。</p><ul><li>Client-IP：提供了运行客户端的机器的IP地址</li><li>From：提供了客户端用户的E-mail地址</li><li>Host：给出了接收请求的服务器的主机名和端口号</li><li>Referer：提供了包含当前请求URI的文档的URL</li><li>UA-Color：提供了与客户端显示器的显示颜色有关的信息</li><li>UA-CPU：给出了客户端CPU的类型或制造商</li><li>UA-OS：给出了运行在客户端机器上的操作系统名称及版本</li><li>User-Agent：将发起请求的应用程序名称告知服务器</li><li>Accept：告诉服务器能够发送哪些媒体类型</li><li>Accept-Charset：告诉服务器能够发送哪些字符集</li><li>Accept-Encoding：告诉服务器能够发送哪些编码方式</li><li>Accept-Language：告诉服务器能够发送哪些语言</li><li>TE：告诉服务器可以使用那些扩展传输编码</li><li>Expect：允许客户端列出某请求所要求的服务器行为</li><li>Range：如果服务器支持范围请求，就请求资源的指定范围</li><li>Cookie：客户端用它向服务器传送数据</li><li>Cookie2：用来说明请求端支持的cookie版本</li></ul><p><strong>⑤是报文体</strong>，它将一个页面表单中的组件值通过param1=value1¶m2=value2的键值对形式编码成一个格式化串，它承载多个请求参数的数据。不但报文体可以传递请求参数，请求URL也可以通过类似于“/chapter15/user.html? param1=value1¶m2=value2”的方式传递请求参数。</p><h4 id="响应报文" tabindex="-1">响应报文 <a class="header-anchor" href="#响应报文" aria-label="Permalink to &quot;响应报文&quot;">​</a></h4><p>HTTP的响应报文也由四部分组成（ 响应行+响应头+空行+响应体）： <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2da234c533e74b9c91e89435d36efc42~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"><strong>真实数据</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96251514bece4248942eaca83e3ab3cf~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"><br><strong>①报文协议及版本</strong>；<br><strong>②状态码及状态描述</strong>；<br><a href="https://mp.weixin.qq.com/s/xxxS5qG244F6L10Y_ZxyGQ" target="_blank" rel="noreferrer">状态码详解</a><br><strong>③响应报文头</strong>，也是由多个属性组成；</p><ul><li>Age：(从最初创建开始)响应持续时间</li><li>Public：服务器为其资源支持的请求方法列表</li><li>Retry-After：如果资源不可用的话，在此日期或时间重试</li><li>Server：服务器应用程序软件的名称和版本</li><li>Title：对HTML文档来说，就是HTML文档的源端给出的标题</li><li>Warning：比原因短语更详细一些的警告报文</li><li>Accept-Ranges：对此资源来说，服务器可接受的范围类型</li><li>Vary：服务器会根据这些首部的内容挑选出最适合的资源版本发送给客户端</li><li>Proxy-Authenticate：来自代理的对客户端的质询列表</li><li>Set-Cookie：在客户端设置数据，以便服务器对客户端进行标识</li><li>Set-Cookie2：与Set-Cookie类似</li><li>WWW-Authenticate：来自服务器的对客户端的质询列表</li></ul><p><strong>④响应报文体</strong>，即我们真正要的“干货”。</p><h3 id="各协议与http协议关系" tabindex="-1">各协议与HTTP协议关系 <a class="header-anchor" href="#各协议与http协议关系" aria-label="Permalink to &quot;各协议与HTTP协议关系&quot;">​</a></h3><ul><li>DNS 服务：解析域名至对应的IP地址</li><li>HTTP 协议：生成针对目标Web服务器的HTTP请求报文</li><li>TCP 协议：将请求报文按序号分割成多个报文段</li><li>IP 协议：搜索对方的地址，一边中转一边传送</li><li>TCP 协议：按序号以原来的顺序重组请求报文请求的处理结果也同样利用TCP/IP协议向用户进行回传</li></ul><blockquote><ul><li>TCP是底层通讯协议，定义的是数据传输和连接方式的规范；</li></ul></blockquote><ul><li>HTTP是应用层协议，定义的是传输数据的内容的规范；</li><li>HTTP协议中的数据是利用TCP协议传输的，所以支持HTTP也就一定支持TCP。</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b222c4d79df43b7ad1804ccc1cd5457~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><blockquote><p>关于HTTP的东西还有很多，我在最后放了张<a href="#关于http" title="#%E5%85%B3%E4%BA%8Ehttp">大图</a>。</p></blockquote><h3 id="https" tabindex="-1">HTTPS <a class="header-anchor" href="#https" aria-label="Permalink to &quot;HTTPS&quot;">​</a></h3><p>在HTTP的基础上再加一层TLS（传输层安全性协议）或者SSL（安全套接层），就构成了HTTPS协议。</p><p>HTTPS 默认工作在 TCP 协议443端口，它的工作流程一般如以下方式：</p><ol><li>TCP 三次同步握手</li><li>客户端验证服务器数字证书</li><li>DH 算法协商对称加密算法的密钥、hash 算法的密钥</li><li>SSL 安全加密隧道协商完成</li><li>网页以加密的方式传输，用协商的对称加密算法和密钥加密，保证数据机密性；用协商的hash算法进行数据完整性保护，保证数据不被篡改。</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53a220a5f8834fbaaa106bcdcf67e676~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><ol><li><p>客户端向服务端发送 <code>Client Hello</code> 消息，其中携带客户端支持的协议版本、加密算法、压缩算法以及客户端生成的随机数；</p></li><li><p>服务端收到客户端支持的协议版本、加密算法等信息后；</p><ol><li>向客户端发送 <code>Server Hello</code> 消息，并携带选择特定的协议版本、加密方法、会话 ID 以及服务端生成的随机数；</li><li>向客户端发送 <code>Certificate</code> 消息，即服务端的证书链，其中包含证书支持的域名、发行方和有效期等信息；</li><li>向客户端发送 <code>Server Key Exchange</code> 消息，传递公钥以及签名等信息；</li><li>向客户端发送可选的消息 <code>Certificate Request</code>，验证客户端的证书；</li><li>向客户端发送 <code>Server Hello Done</code> 消息，通知服务端已经发送了全部的相关信息；</li></ol></li><li><p>客户端收到服务端的协议版本、加密方法、会话 ID 以及证书等信息后，验证服务端的证书；</p><ol><li>向服务端发送 <code>Client Key Exchange</code> 消息，包含使用服务端公钥加密后的随机字符串，即预主密钥（<code>Pre Master Secret</code>）；</li><li>向服务端发送 <code>Change Cipher Spec</code> 消息，通知服务端后面的数据段会加密传输；</li><li>向服务端发送 <code>Finished</code> 消息，其中包含加密后的握手信息；</li></ol></li><li><p>服务端收到 <code>Change Cipher Spec</code> 和 <code>Finished</code> 消息后；</p><ol><li>向客户端发送 <code>Change Cipher Spec</code> 消息，通知客户端后面的数据段会加密传输；</li><li>向客户端发送 <code>Finished</code> 消息，验证客户端的 <code>Finished</code> 消息并完成 TLS 握手；</li></ol></li></ol><p>TLS 握手的关键在于利用通信双发生成的随机字符串和服务端的证书公钥生成一个双方经过协商后的对称密钥，这样通信双方就可以使用这个对称密钥在后续的数据传输中加密消息数据，防止中间人的监听和攻击，保证通讯安全。</p><blockquote><p>HTTPS连接 需要7次握手，3次TCP + 4次TLS。</p></blockquote><h2 id="第四部分-服务器处理请求并返回-http-报文" tabindex="-1">第四部分 服务器处理请求并返回 HTTP 报文 <a class="header-anchor" href="#第四部分-服务器处理请求并返回-http-报文" aria-label="Permalink to &quot;第四部分 服务器处理请求并返回 HTTP 报文&quot;">​</a></h2><p>每台服务器上都会安装处理请求的应用——Web Server。常见的Web Server 产品有 <code>apache</code>、<code>nginx</code>、<code>IIS</code> 或 <code>Lighttpd</code> 等。</p><p>HTTP请求一般可以分为两类，静态资源 和 动态资源。</p><p>请求访问静态资源，这个就直接根据url地址去服务器里找就好了。</p><p>请求动态资源的话，就需要web server把不同请求，委托给服务器上处理相应请求的程序进行处理（例如 CGI 脚本，JSP 脚本，servlets，ASP 脚本，服务器端 JavaScript，或者一些其它的服务器端技术等），然后返回后台程序处理产生的结果作为响应，发送到客户端。</p><p>服务器在处理请求的时候主要有三种方式：</p><ul><li>第一种：是用一个线程来处理所有的请求，并且同时只能处理一个请求，但是这样的话性能是非常的低的。</li><li>第二种：是每一个请求都给他分配一个线程但是当链接和请求比较多的时候就会导致服务器的cpu不堪重负。</li><li>第三种：就是采用复用I/O的方式来处理例如通过epoll方式监视所有链接当链接状态发生改变的时候才去分配空间进行处理。</li></ul><h2 id="第五部分-浏览器渲染页面" tabindex="-1">第五部分 浏览器渲染页面 <a class="header-anchor" href="#第五部分-浏览器渲染页面" aria-label="Permalink to &quot;第五部分 浏览器渲染页面&quot;">​</a></h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d06569f9201b4272ac59c51f7de26599~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="dom树" tabindex="-1">DOM树 <a class="header-anchor" href="#dom树" aria-label="Permalink to &quot;DOM树&quot;">​</a></h3><p>字节 → 字符 → 令牌 → 节点 → 对象模型。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&lt;!</span><span style="color:#79B8FF;">DOCTYPE</span><span style="color:#E1E4E8;"> html</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;viewport&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;width=device-width,initial-scale=1&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">href</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;style.css&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">rel</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;stylesheet&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">&gt;Critical Path&lt;/</span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;Hello &lt;</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;web performance&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt; students!&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;&lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;awesome-photo.jpg&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&lt;!</span><span style="color:#005CC5;">DOCTYPE</span><span style="color:#24292E;"> html</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">head</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;viewport&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;width=device-width,initial-scale=1&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">href</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;style.css&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">rel</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;stylesheet&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">title</span><span style="color:#24292E;">&gt;Critical Path&lt;/</span><span style="color:#22863A;">title</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">head</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;Hello &lt;</span><span style="color:#22863A;">span</span><span style="color:#24292E;">&gt;web performance&lt;/</span><span style="color:#22863A;">span</span><span style="color:#24292E;">&gt; students!&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;&lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;awesome-photo.jpg&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74e00f9b02fe4e7191d7cbdf0a35d753~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><ul><li>转换: 浏览器从磁盘或网络读取 HTML 的原始字节，并根据文件的指定编码（例如 UTF-8）将它们转换成各个字符。</li><li>令牌化: 浏览器将字符串转换成 W3C HTML5 标准规定的各种令牌，例如，“”、“”，以及其他尖括号内的字符串。每个令牌都具有特殊含义和一组规则。</li><li>词法分析: 发出的令牌转换成定义其属性和规则的“对象”。</li><li>DOM 构建: 最后，由于 HTML 标记定义不同标记之间的关系（一些标记包含在其他标记内），创建的对象链接在一个树数据结构内，此结构也会捕获原始标记中定义的父项-子项关系: HTML 对象是 body 对象的父项，body 是 paragraph 对象的父项，依此类推。</li></ul><h3 id="css-对象模型-cssom" tabindex="-1">CSS 对象模型 (CSSOM) <a class="header-anchor" href="#css-对象模型-cssom" aria-label="Permalink to &quot;CSS 对象模型 (CSSOM)&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">body { font</span><span style="color:#F97583;">-</span><span style="color:#B392F0;">size</span><span style="color:#E1E4E8;">: 16px }</span></span>
<span class="line"><span style="color:#E1E4E8;">p { font</span><span style="color:#F97583;">-</span><span style="color:#B392F0;">weight</span><span style="color:#E1E4E8;">: bold }</span></span>
<span class="line"><span style="color:#E1E4E8;">span { </span><span style="color:#B392F0;">color</span><span style="color:#E1E4E8;">: red }</span></span>
<span class="line"><span style="color:#E1E4E8;">p span { </span><span style="color:#B392F0;">display</span><span style="color:#E1E4E8;">: none }</span></span>
<span class="line"><span style="color:#E1E4E8;">img { </span><span style="color:#B392F0;">float</span><span style="color:#E1E4E8;">: right }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">body { font</span><span style="color:#D73A49;">-</span><span style="color:#6F42C1;">size</span><span style="color:#24292E;">: 16px }</span></span>
<span class="line"><span style="color:#24292E;">p { font</span><span style="color:#D73A49;">-</span><span style="color:#6F42C1;">weight</span><span style="color:#24292E;">: bold }</span></span>
<span class="line"><span style="color:#24292E;">span { </span><span style="color:#6F42C1;">color</span><span style="color:#24292E;">: red }</span></span>
<span class="line"><span style="color:#24292E;">p span { </span><span style="color:#6F42C1;">display</span><span style="color:#24292E;">: none }</span></span>
<span class="line"><span style="color:#24292E;">img { </span><span style="color:#6F42C1;">float</span><span style="color:#24292E;">: right }</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8720244e9b1745b4be9068e197d84081~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d1b61e279104818a3f0bdc275ec9d6f~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="布局树layout-tree" tabindex="-1">布局树Layout Tree <a class="header-anchor" href="#布局树layout-tree" aria-label="Permalink to &quot;布局树Layout Tree&quot;">​</a></h3><ul><li>DOM 树与 CSSOM 树合并后形成渲染树。</li><li>渲染树只包含渲染网页所需的节点。</li><li>布局计算每个对象的精确位置和大小。</li><li>最后一步是绘制，使用最终渲染树将像素渲染到屏幕上。</li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9882c503e8d6492282d5545606f8634c~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="渲染" tabindex="-1">渲染 <a class="header-anchor" href="#渲染" aria-label="Permalink to &quot;渲染&quot;">​</a></h3><p>渲染流程：</p><ol><li>获取DOM后分割为多个图层</li><li>对每个图层的节点计算样式结果 （Recalculate style--样式重计算）</li><li>为每个节点生成图形和位置 （Layout--重排,回流）</li><li>将每个节点绘制填充到图层位图中 （Paint--重绘）</li><li>图层作为纹理上传至GPU</li><li>组合多个图层到页面上生成最终屏幕图像 （Composite Layers--图层重组）</li></ol><h4 id="创建图层" tabindex="-1">创建图层 <a class="header-anchor" href="#创建图层" aria-label="Permalink to &quot;创建图层&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;position_&quot;</span><span style="color:#E1E4E8;">&gt;position&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;box_3d&quot;</span><span style="color:#E1E4E8;">&gt;3d变换&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;will-change&quot;</span><span style="color:#E1E4E8;">&gt;will-change&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;transform&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">iframe</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;https://www.baidu.com&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">iframe</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">div {</span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">: 100px;</span><span style="color:#B392F0;">height</span><span style="color:#E1E4E8;">: 100px;}</span></span>
<span class="line"><span style="color:#E1E4E8;">.position_ {</span><span style="color:#B392F0;">background</span><span style="color:#E1E4E8;">: pink;</span><span style="color:#B392F0;">position</span><span style="color:#E1E4E8;">: fixed;z</span><span style="color:#F97583;">-</span><span style="color:#B392F0;">index</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">;}</span></span>
<span class="line"><span style="color:#E1E4E8;">.box_3d {</span><span style="color:#B392F0;">background</span><span style="color:#E1E4E8;">: red;</span><span style="color:#B392F0;">transform</span><span style="color:#E1E4E8;">:  </span><span style="color:#B392F0;">translate3d</span><span style="color:#E1E4E8;">(100px,30px,10px);}</span></span>
<span class="line"><span style="color:#E1E4E8;">.will</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">change {</span><span style="color:#B392F0;">background</span><span style="color:#E1E4E8;">: #f12312;will</span><span style="color:#F97583;">-</span><span style="color:#B392F0;">change</span><span style="color:#E1E4E8;">: transform;}</span></span>
<span class="line"><span style="color:#E1E4E8;">.transform {</span><span style="color:#B392F0;">background</span><span style="color:#E1E4E8;">: #</span><span style="color:#79B8FF;">302912</span><span style="color:#E1E4E8;">;</span><span style="color:#B392F0;">transform</span><span style="color:#E1E4E8;">: </span><span style="color:#B392F0;">skew</span><span style="color:#E1E4E8;">(30deg, 20deg);}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;position_&quot;</span><span style="color:#24292E;">&gt;position&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;box_3d&quot;</span><span style="color:#24292E;">&gt;3d变换&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;will-change&quot;</span><span style="color:#24292E;">&gt;will-change&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;transform&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">iframe</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;https://www.baidu.com&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">iframe</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">div {</span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">: 100px;</span><span style="color:#6F42C1;">height</span><span style="color:#24292E;">: 100px;}</span></span>
<span class="line"><span style="color:#24292E;">.position_ {</span><span style="color:#6F42C1;">background</span><span style="color:#24292E;">: pink;</span><span style="color:#6F42C1;">position</span><span style="color:#24292E;">: fixed;z</span><span style="color:#D73A49;">-</span><span style="color:#6F42C1;">index</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">;}</span></span>
<span class="line"><span style="color:#24292E;">.box_3d {</span><span style="color:#6F42C1;">background</span><span style="color:#24292E;">: red;</span><span style="color:#6F42C1;">transform</span><span style="color:#24292E;">:  </span><span style="color:#6F42C1;">translate3d</span><span style="color:#24292E;">(100px,30px,10px);}</span></span>
<span class="line"><span style="color:#24292E;">.will</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">change {</span><span style="color:#6F42C1;">background</span><span style="color:#24292E;">: #f12312;will</span><span style="color:#D73A49;">-</span><span style="color:#6F42C1;">change</span><span style="color:#24292E;">: transform;}</span></span>
<span class="line"><span style="color:#24292E;">.transform {</span><span style="color:#6F42C1;">background</span><span style="color:#24292E;">: #</span><span style="color:#005CC5;">302912</span><span style="color:#24292E;">;</span><span style="color:#6F42C1;">transform</span><span style="color:#24292E;">: </span><span style="color:#6F42C1;">skew</span><span style="color:#24292E;">(30deg, 20deg);}</span></span></code></pre></div><p>在 chrome 上查看 Layers. <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/624ce78995ec4e5498922c41ffd50beb~tplv-k3u1fbpfcp-zoom-1.image" alt=""> 如果没有打开Layers,按下图打开： <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f7c253ffe11487fa05f7e4619da35a7~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><blockquote><p>知道图层的存在，我们可以手动打开一个图层，通过添加<code>transform: translateZ(0)</code> 这样回流和重绘的代价就小了，效率就会大大提高。但是不要滥用这个属性，否则会大大增加内存消耗。—— 开启GPU加速。</p></blockquote><h4 id="回流和重绘" tabindex="-1">回流和重绘 <a class="header-anchor" href="#回流和重绘" aria-label="Permalink to &quot;回流和重绘&quot;">​</a></h4><ul><li>重绘</li></ul><p>当页面中元素样式的改变并不影响它在文档流中的位置时（例如：color、background-color、visibility等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘。</p><ul><li>回流</li></ul><p>当Render Tree中部分或全部元素的尺寸、结构、或某些属性发生改变时，浏览器重新渲染部分或全部文档的过程称为回流。</p><blockquote><p>回流必将引起重绘，而重绘不一定会引起回流。</p></blockquote><p>引起回流：</p><ol><li>页面首次渲染</li><li>浏览器窗口大小发生改变</li><li>元素尺寸或位置发生改变</li><li>元素内容变化（文字数量或图片大小等等）</li><li>元素字体大小变化</li><li>添加或者删除可见的DOM元素</li><li>激活CSS伪类（例如：:hover）</li><li>查询某些属性或调用某些方法</li></ol><p>引起回流的属性和方法：</p><ul><li>clientWidth、clientHeight、clientTop、clientLeft</li><li>offsetWidth、offsetHeight、offsetTop、offsetLeft</li><li>scrollWidth、scrollHeight、scrollTop、scrollLeft</li><li>scrollIntoView()、scrollIntoViewIffNeeded()</li><li>getComputedStyle()</li><li>getBoundingClientRect()</li><li>scrollTo()</li></ul><h5 id="如何减少回流" tabindex="-1">如何减少回流 <a class="header-anchor" href="#如何减少回流" aria-label="Permalink to &quot;如何减少回流&quot;">​</a></h5><ul><li>css</li></ul><ol><li>避免使用table布局;</li><li>尽可能在DOM树的最末端改变class;</li><li>避免设置多层内联样式;</li><li>将动画效果应用到position属性为absolute或fixed的元素上;</li><li>避免使用CSS表达式（例如：calc()）。</li></ol><ul><li>JS</li></ul><ol><li>避免频繁操作样式，最好一次性重写style属性，或者将样式列表定义为class并一次性更改class属性。</li><li>避免频繁操作DOM，创建一个documentFragment，在它上面应用所有DOM操作，最后再把它添加到文档中。</li><li>也可以先为元素设置display: none，操作结束后再把它显示出来。因为在display属性为none的元素上进行的DOM操作不会引发回流和重绘。</li><li>避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。</li><li>对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</li></ol><h2 id="第六部分-断开连接-tcp-四次分手" tabindex="-1">第六部分 断开连接：TCP 四次分手 <a class="header-anchor" href="#第六部分-断开连接-tcp-四次分手" aria-label="Permalink to &quot;第六部分 断开连接：TCP 四次分手&quot;">​</a></h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f9ae90644e14435a0beb2ba97332413~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><ol><li>刚开始双方都处于established状态，假如是客户端先发起关闭请求</li><li>第一次挥手：客户端发送一个FIN报文，报文中会指定一个序列号。此时客户端处于FIN_WAIT1状态</li><li>第二次挥手：服务端收到FIN之后，会发送ACK报文，且把客户端的序列号值+1作为ACK报文的序列号值，表明已经收到客户端的报文了，此时服务端处于CLOSE_WAIT状态</li><li>第三次挥手：如果服务端也想断开连接了，和客户端的第一次挥手一样，发送FIN报文，且指定一个序列号。此时服务端处于LAST_ACK的状态</li><li>需要过一阵子以确保服务端收到自己的ACK报文之后才会进入CLOSED状态，服务端收到ACK报文之后，就处于关闭连接了，处于CLOSED状态。</li></ol><h3 id="挥手为什么需要四次" tabindex="-1">挥手为什么需要四次？ <a class="header-anchor" href="#挥手为什么需要四次" aria-label="Permalink to &quot;挥手为什么需要四次？&quot;">​</a></h3><p>因为当服务端收到客户端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当服务端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉客户端，“你发的FIN报文我收到了”。只有等到我服务端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四次挥手。</p><h3 id="为什么客户端发送ack之后不直接关闭-而是要等一阵子才关闭" tabindex="-1">为什么客户端发送ACK之后不直接关闭，而是要等一阵子才关闭？ <a class="header-anchor" href="#为什么客户端发送ack之后不直接关闭-而是要等一阵子才关闭" aria-label="Permalink to &quot;为什么客户端发送ACK之后不直接关闭，而是要等一阵子才关闭？&quot;">​</a></h3><p>客户端收到服务端的连接释放报文段后，对此发出确认报文段（ACK=1，seq=u+1，ack=w+1），客户端进入TIME_WAIT（时间等待）状态。此时TCP未释放掉，需要经过时间等待计时器设置的时间2MSL后，客户端才进入CLOSED状态。如果不等待，客户端直接跑路，当服务端还有很多数据包要给客户端发，且还在路上的时候，若客户端的端口此时刚好被新的应用占用，那么就接收到了无用数据包，造成数据包混乱。</p><h3 id="为什么time-wait状态需要经过2msl-最大报文生存时间-才能返回到close状态" tabindex="-1">为什么TIME_WAIT状态需要经过2MSL（最大报文生存时间）才能返回到CLOSE状态？ <a class="header-anchor" href="#为什么time-wait状态需要经过2msl-最大报文生存时间-才能返回到close状态" aria-label="Permalink to &quot;为什么TIME_WAIT状态需要经过2MSL（最大报文生存时间）才能返回到CLOSE状态？&quot;">​</a></h3><p>理论上，四个报文都发送完毕，就可以直接进入CLOSE状态了，但是可能网络是不可靠的，有可能最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。 1 个 MSL 确保四次挥手中主动关闭方最后的 ACK 报文最终能达到对端； 1 个 MSL 确保对端没有收到 ACK 重传的 FIN 报文可以到达。</p><h2 id="关于http" tabindex="-1">关于HTTP <a class="header-anchor" href="#关于http" aria-label="Permalink to &quot;关于HTTP&quot;">​</a></h2><p>如果想要高清大图或者Xmind文件的话，可以私信lian x <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f5fe6dc3eca47bd90da177b67051cb9~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h2 id="站在巨人的肩膀上" tabindex="-1">站在巨人的肩膀上 <a class="header-anchor" href="#站在巨人的肩膀上" aria-label="Permalink to &quot;站在巨人的肩膀上&quot;">​</a></h2><p>在这里对前辈大佬表示敬意，查找了很多资料，如有遗漏，还请见谅。文中如果有误，还望及时指出，感谢！</p><ul><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoq.cn%2Farticle%2Fwhcobxfbgtphy7ijv1kp" title="https://www.infoq.cn/article/whcobxfbgtphy7ijv1kp" target="_blank" rel="noreferrer">5 分钟看懂 HTTP3</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F158593966" title="https://zhuanlan.zhihu.com/p/158593966" target="_blank" rel="noreferrer">一文带你了解HTTPS</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fljianshu%2FBlog%2Fissues%2F24" title="https://github.com/ljianshu/Blog/issues/24" target="_blank" rel="noreferrer">从URL输入到页面展现到底发生什么？</a></li><li><a href="https://juejin.cn/post/6844903784229896199" title="https://juejin.cn/post/6844903784229896199" target="_blank" rel="noreferrer">从URL输入到页面展现到底发生什么？</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FHanani_Jia%2Farticle%2Fdetails%2F83036051" title="https://blog.csdn.net/Hanani_Jia/article/details/83036051" target="_blank" rel="noreferrer">在浏览器上请求一个URL的全部过程</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000006879700" title="https://segmentfault.com/a/1190000006879700" target="_blank" rel="noreferrer">前端经典面试题: 从输入URL到页面加载发生了什么？</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F60950750" title="https://zhuanlan.zhihu.com/p/60950750" target="_blank" rel="noreferrer">浏览器缓存看这一篇就够了</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fnyimac.gitee.io%2F2020%2F12%2F10%2FURL%25E8%25AE%25BF%25E9%2597%25AE%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E6%25B5%2581%25E7%25A8%258B%2F" title="https://nyimac.gitee.io/2020/12/10/URL%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B5%81%E7%A8%8B/" target="_blank" rel="noreferrer">从输入URL到浏览器显示页面的流程</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F80551769" title="https://zhuanlan.zhihu.com/p/80551769" target="_blank" rel="noreferrer">在浏览器输入 URL 回车之后发生了什么（超详细版）</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmy.oschina.net%2Fyzbty32%2Fblog%2F549305" title="https://my.oschina.net/yzbty32/blog/549305" target="_blank" rel="noreferrer">TCP和Http的区别!我都搞懂了,你就别迷糊了!</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdraveness.me%2Fwhys-the-design-https-latency%2F" title="https://draveness.me/whys-the-design-https-latency/" target="_blank" rel="noreferrer">为什么 HTTPS 需要 7 次握手以及 9 倍时延</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fperformance%2Fcritical-rendering-path%2Frender-tree-construction%3Fhl%3Dzh-cn" title="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction?hl=zh-cn" target="_blank" rel="noreferrer">渲染树构建、布局及绘制</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Ffeng9exe%2Fp%2F10907959.html" title="https://www.cnblogs.com/feng9exe/p/10907959.html" target="_blank" rel="noreferrer">浏览器渲染详细过程：重绘、重排和 composite 只是冰山一角</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fyeungkc.com%2Fweb-reflow-and-repaint%2F" title="https://yeungkc.com/web-reflow-and-repaint/" target="_blank" rel="noreferrer">浏览器渲染机制和 Reflow（回流、重排）和 Repaint（重绘）</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000038468748" title="https://segmentfault.com/a/1190000038468748" target="_blank" rel="noreferrer">问我Chrome浏览器的渲染原理（6000字长文）</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Ffesfsefgs%2Farticle%2Fdetails%2F105918451" title="https://blog.csdn.net/fesfsefgs/article/details/105918451" target="_blank" rel="noreferrer">浅谈浏览器的图层与重绘重排（详细），以及如何用于性能优化</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fabelsu7.top%2F2018%2F10%2F18%2Fhttp-notes-part-1%2F" title="https://abelsu7.top/2018/10/18/http-notes-part-1/" target="_blank" rel="noreferrer">HTTP 笔记 1：Web 基础及简单的 HTTP 协议</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpic.liaoyongfu.com%2F2019%2F1028%2F%25E5%259B%25BE%25E8%25A7%25A3HTTP-21%25E5%25BC%25A0%25E5%259B%25BE%25E6%258A%258AHTTP%25E5%25AE%2589%25E6%258E%2592%25E5%25BE%2597%25E6%2598%258E%25E6%2598%258E%25E7%2599%25BD%25E7%2599%25BD.pdf" title="https://pic.liaoyongfu.com/2019/1028/%E5%9B%BE%E8%A7%A3HTTP-21%E5%BC%A0%E5%9B%BE%E6%8A%8AHTTP%E5%AE%89%E6%8E%92%E5%BE%97%E6%98%8E%E6%98%8E%E7%99%BD%E7%99%BD.pdf" target="_blank" rel="noreferrer">图解HTTP-21张图把HTTP安排得明明白白</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhttp3-explained.haxx.se%2Fzh%2Fzh" title="https://http3-explained.haxx.se/zh/zh" target="_blank" rel="noreferrer">HTTP3</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F158593966" title="https://zhuanlan.zhihu.com/p/158593966" target="_blank" rel="noreferrer">一文带你了解HTTPS</a></li><li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.poetries.top%2Fbrowser-working-principle%2Fguide%2Fpart1%2Flesson01.html%23%25E6%2597%25A9%25E6%259C%259F%25E5%25A4%259A%25E8%25BF%259B%25E7%25A8%258B%25E6%259E%25B6%25E6%259E%2584" title="https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html#%E6%97%A9%E6%9C%9F%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84" target="_blank" rel="noreferrer">浏览器工作原理与实践</a></li></ul><h2 id="参考文章" tabindex="-1">参考文章 <a class="header-anchor" href="#参考文章" aria-label="Permalink to &quot;参考文章&quot;">​</a></h2><p><a href="https://juejin.cn/post/6935232082482298911" target="_blank" rel="noreferrer">从输入URL开始建立前端知识体系</a></p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><div class="edit-info" data-v-ef5dee53><!----><div class="last-updated" data-v-ef5dee53><p class="VPLastUpdated" data-v-ef5dee53 data-v-7e05ebdb>Last updated: <time datetime="2023-11-02T09:53:13.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><a class="pager-link prev" href="/http/url-request-flow" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Previous page</span><span class="title" data-v-ef5dee53>说一下从url输入到返回请求的过程</span></a></div><div class="pager" data-v-ef5dee53><a class="pager-link next" href="/http/check-url" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Next page</span><span class="title" data-v-ef5dee53>正确的校验有效的URL</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"algorithm_7.md\":\"184a7c16\",\"algorithm_5.md\":\"b1f1eedf\",\"other_chart-bed.md\":\"3562f099\",\"algorithm_binary-tree_1.md\":\"b3be167e\",\"algorithm_dynamic-programming_1.md\":\"8e7f986c\",\"http_url-request-flow.md\":\"212a10ec\",\"algorithm_dynamic-programming_2.md\":\"b88e3d39\",\"algorithm_8.md\":\"59103daf\",\"algorithm_dynamic-programming_4.md\":\"420b4817\",\"es6_map-set.md\":\"5f37de94\",\"http_check-url.md\":\"da110c99\",\"other_wechat-cloud-hosting.md\":\"019bfb32\",\"react_setstate.md\":\"6fac2e9b\",\"javascript_constructor.md\":\"ea58038f\",\"javascript_clone.md\":\"ab6df520\",\"javascript_js-data-types.md\":\"d9ca4aad\",\"react_virtual-list.md\":\"63d0c0a3\",\"javascript_scope-closure.md\":\"060a06c4\",\"javascript_inherit.md\":\"584352d6\",\"markdown-examples2.md\":\"c0a43d06\",\"index.md\":\"f3b0cb9b\",\"algorithm_bitwise-operation_1.md\":\"5c26a212\",\"react_state-props-ref.md\":\"974d5659\",\"markdown-examples.md\":\"eed1f2e6\",\"algorithm_bitwise-operation_2.md\":\"912123f0\",\"other_interview.md\":\"c5afa6c6\",\"javascript_dateobject.md\":\"e4859e24\",\"javascript_js-new-behavior.md\":\"e176d2fe\",\"other_base64.md\":\"233bbd54\",\"http_url-request-flow-2.md\":\"578c10ff\",\"api-examples.md\":\"fd21a1c9\",\"algorithm_dynamic-programming_5.md\":\"a8a639f3\",\"algorithm_6.md\":\"884381fb\",\"other_axios.md\":\"6da9eb1d\",\"other_breakpoint-continuation.md\":\"221421c0\",\"react_hooks.md\":\"a488897c\",\"react_controlled-and-uncontrolled.md\":\"af0d5e53\",\"react_coriolization_of_high_order_functions.md\":\"2da2ca68\",\"other_canvas.md\":\"345f91d5\",\"javascript_functions-to-10.md\":\"8332c8fc\",\"vue3_source-code-to-5-2.md\":\"f8eafeff\",\"javascript_this.md\":\"9093d5bb\",\"vue3_vuex-ts.md\":\"3b661d8f\",\"other_html2canvas.md\":\"7c1d00ab\",\"vue3_vue2-vue3-responsive-principle.md\":\"83fd145e\",\"algorithm_dynamic-programming_3.md\":\"f2f96d00\",\"es6_promise.md\":\"96a9c6cc\",\"javascript_bind-call-apply.md\":\"3b27ddc0\",\"react_key-and-index.md\":\"f595e398\",\"vue2_ast.md\":\"6bfffe4e\",\"vue2_responsive.md\":\"8f3b1065\",\"vue3_source-code-to-5-1.md\":\"f23e32ff\",\"vue2_dom-diff.md\":\"22174aa6\",\"algorithm_4.md\":\"41bc0482\",\"javascript_arrayfunction.md\":\"6f0343df\",\"vue3_source-code-to-4.md\":\"c42db70d\",\"vue3_source-code-to-3.md\":\"7fec2c64\",\"vue3_source-code-to-1.md\":\"68c7c0db\",\"vue3_guide.md\":\"816847de\",\"vue2_mustache.md\":\"8401f011\",\"vue3_persistence.md\":\"eed3348a\",\"vue3_source-code-to-2.md\":\"aa7fbc33\",\"vue2_virtual-list.md\":\"de84cdce\",\"react_life-cycle.md\":\"5fbb1354\",\"typescript_guide.md\":\"73c720b8\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"周星星\",\"description\":\"周星星\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"Vue\",\"items\":[{\"text\":\"Vue2\",\"link\":\"/vue2/virtual-list\"},{\"text\":\"Vue3\",\"link\":\"/vue3/guide\"}]},{\"text\":\"React\",\"link\":\"/react/life-cycle\"},{\"text\":\"JavaScript\",\"link\":\"/javaScript/arrayFunction\"},{\"text\":\"TypeScript\",\"link\":\"/typeScript/guide\"},{\"text\":\"ES6\",\"link\":\"/es6/map-set\"},{\"text\":\"算法\",\"link\":\"/algorithm/dynamic-programming/1\"},{\"text\":\"计算机网络基础知识\",\"link\":\"/http/url-request-flow\"},{\"text\":\"填坑之旅\",\"link\":\"/other/canvas\"}],\"sidebar\":{\"/http/\":{\"base\":\"/http/\",\"items\":[{\"text\":\"《计算机网络基础知识》笔记\",\"items\":[{\"text\":\"说一下从url输入到返回请求的过程\",\"link\":\"url-request-flow\"},{\"text\":\"从输入URL开始建立前端知识体系\",\"link\":\"url-request-flow-2\"},{\"text\":\"正确的校验有效的URL\",\"link\":\"check-url\"}]}]},\"/es6/\":{\"base\":\"/es6/\",\"items\":[{\"text\":\"《ECMAScript》笔记\",\"items\":[{\"text\":\"手动实现Map、Set数据结构\",\"link\":\"map-set\"},{\"text\":\"手动实现Promise\",\"link\":\"promise\"}]}]},\"/javaScript/\":{\"base\":\"/javaScript/\",\"items\":[{\"text\":\"《JavaScript》笔记\",\"items\":[{\"text\":\"js操作数组17种方法\",\"link\":\"arrayFunction\"},{\"text\":\"Date对象\",\"link\":\"dateObject\"},{\"text\":\"ES6的解构赋值、Object.assign、[].concat它们是深拷贝还是浅拷贝？\",\"link\":\"clone\"},{\"text\":\"继承：B.prototype.constructor = B 为什么要加上这句\",\"link\":\"constructor\"},{\"text\":\"嗨，你真的懂this吗？\",\"link\":\"this\"},{\"text\":\"JavaScript常用八种继承方案\",\"link\":\"inherit\"},{\"text\":\"说说作用域和闭包吧\",\"link\":\"scope-closure\"},{\"text\":\"10个常见的前端手写功能，你全都会吗？\",\"link\":\"functions-to-10\"},{\"text\":\"JS 的 new 做了哪些事情呢？\",\"link\":\"js-new-behavior\"},{\"text\":\"bind、call、apply的区别与用法？\",\"link\":\"bind-call-apply\"},{\"text\":\"JavaScript数据类型知识你真的懂吗？\",\"link\":\"js-data-types\"}]}]},\"/react/\":{\"base\":\"/react/\",\"items\":[{\"text\":\"《React》笔记\",\"items\":[{\"text\":\"高阶函数柯里化\",\"link\":\"coriolization_of_high_order_functions\"},{\"text\":\"受控组件和非受控组件\",\"link\":\"controlled-and-uncontrolled\"},{\"text\":\"state、props、ref三大属性\",\"link\":\"state-props-ref\"},{\"text\":\"组件生命周期\",\"link\":\"life-cycle\"},{\"text\":\"虚拟DOM中的Key与index\",\"link\":\"key-and-index\"},{\"text\":\"setState的两种写法、修改部分属性\",\"link\":\"setState\"},{\"text\":\"React Hooks 大丰收！\",\"link\":\"hooks\"},{\"text\":\"不正经写React的家伙，写了个不正经的React版虚拟列表\",\"link\":\"virtual-list\"}]}]},\"/typeScript/\":{\"base\":\"/typeScript/\",\"items\":[{\"text\":\"《TypeScript》笔记\",\"items\":[{\"text\":\"一份不可多得的 TS 学习指南（1.8W字）\",\"link\":\"guide\"}]}]},\"/vue2/\":{\"base\":\"/vue2/\",\"items\":[{\"text\":\"《Vue2》笔记\",\"items\":[{\"text\":\"虚拟列表：你有勇气就给我10万，我就有本事展示给你看\",\"link\":\"virtual-list\"},{\"text\":\"mustache模板引擎\",\"link\":\"mustache\"},{\"text\":\"虚拟DOM和diff算法\",\"link\":\"dom-diff\"},{\"text\":\"数据响应式原理\",\"link\":\"responsive\"},{\"text\":\"AST抽象语法树\",\"link\":\"ast\"}]}]},\"/vue3/\":{\"base\":\"/vue3/\",\"items\":[{\"text\":\"《Vue3》笔记\",\"items\":[{\"text\":\"新特性\",\"link\":\"guide\"},{\"text\":\"第一期：源码学习方法分享，模块之间依赖关系，初始化整体流程分析\",\"link\":\"source-code-to-1\"},{\"text\":\"第二期打包脚本解析，查找入口文件，源码层面解读初始化过程\",\"link\":\"source-code-to-2\"},{\"text\":\"第三期：从patch根组件到首次渲染DOM树过程分析\",\"link\":\"source-code-to-3\"},{\"text\":\"第四期：DOM和组件属性初始化过程，更新整体流程解析\",\"link\":\"source-code-to-4\"},{\"text\":\"第五期：数据响应式原理，reactive响应式和依赖收集过程（上）\",\"link\":\"source-code-to-5-1\"},{\"text\":\"第五期：数据响应式原理，reactive响应式和依赖收集过程（下）\",\"link\":\"source-code-to-5-2\"},{\"text\":\"Vuex 4.x 利用Typescript实现智能提示效果\",\"link\":\"vuex-ts\"},{\"text\":\"Vue的响应式原理？（Vue2、Vue3）\",\"link\":\"vue2-vue3-responsive-principle\"},{\"text\":\"学会了Vuex与Cookies、localStorage、sessionStorage联动实现数据持久化\",\"link\":\"persistence\"}]}]},\"/other/\":{\"base\":\"/other/\",\"items\":[{\"text\":\"工具\",\"items\":[{\"text\":\"为了进阶Canvas，前进！冲啊\",\"link\":\"canvas\"},{\"text\":\"html2canvas总是跨域，一步到位\",\"link\":\"html2canvas\"},{\"text\":\"Axios封装\",\"link\":\"axios\"},{\"text\":\"base64图片底部留白，原因竟然是这个\",\"link\":\"base64\"},{\"text\":\"GitHub + jsDelivr + TinyPNG+ PicGo+Typora 打造稳定快速、高效免费图床 \",\"link\":\"chart-bed\"},{\"text\":\"自我总结\",\"link\":\"interview\"},{\"text\":\"微信云托管\",\"link\":\"wechat-cloud-hosting\"},{\"text\":\"断点续传的方法的实现\",\"link\":\"breakpoint-continuation\"}]}]},\"/algorithm/\":{\"base\":\"/algorithm/\",\"items\":[{\"text\":\"《算法》笔记\",\"items\":[{\"base\":\"/algorithm/dynamic-programming/\",\"items\":[{\"text\":\"动态规划\",\"items\":[{\"text\":\"剪绳子\",\"link\":\"1\"},{\"text\":\"爬梯子\",\"link\":\"2\"},{\"text\":\"新21点\",\"link\":\"3\"},{\"text\":\"统计字典序元音字符串的数目\",\"link\":\"4\"},{\"text\":\"最长递增子序列\",\"link\":\"5\"}]}]},{\"base\":\"/algorithm/bitwise-operation/\",\"items\":[{\"text\":\"位运算\",\"items\":[{\"text\":\"解题基础\",\"link\":\"1\"},{\"text\":\"火柴拼正方形\",\"link\":\"2\"}]}]},{\"base\":\"/algorithm/binary-tree/\",\"items\":[{\"text\":\"二叉树\",\"items\":[{\"text\":\"在每个树行中找最大值\",\"link\":\"1\"}]}]},{\"text\":\"重建序列\",\"link\":\"4\"},{\"text\":\"公交站间的距离\",\"link\":\"5\"},{\"text\":\"最长连续序列\",\"link\":\"6\"},{\"text\":\"数组序号转换\",\"link\":\"7\"},{\"text\":\"生成每种字符都是奇数个的字符串\",\"link\":\"8\"}]}]}},\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"VTK0W8N1YV\",\"apiKey\":\"931cbd330a9c59b8e8ca949720531250\",\"indexName\":\"qingyeweiio\"}}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>